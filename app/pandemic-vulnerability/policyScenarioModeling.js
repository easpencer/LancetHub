// Comprehensive US Policy Scenario Modeling with Evidence-Based Projections
// Sources: CDC, WHO, World Bank, Johns Hopkins Center for Health Security, 
// RAND Corporation, Council on Foreign Relations, Lancet Commission

export const comprehensivePolicyScenarios = {
  baseline: {
    id: 'baseline',
    name: 'Current Baseline (2024)',
    shortName: 'Baseline',
    description: 'Current funding and policy levels maintained at 2024 levels',
    color: '#6B7280',
    
    // Funding levels as percentage of baseline
    funding: {
      globalHealth: 100,
      cdcBudget: 100,
      femaPreparedness: 100,
      nihResearch: 100,
      hospitalReadiness: 100,
      stateHealthGrants: 100,
      whoContribution: 100,
      gaviSupport: 100,
      pepfarFunding: 100,
      usaidHealth: 100
    },
    
    // Key metrics
    metrics: {
      domesticPreparednessScore: 72,
      globalEngagementScore: 78,
      researchCapacityScore: 85,
      supplyChainResilienceScore: 68,
      workforceReadinessScore: 70,
      communityResilienceScore: 65,
      dataSystemsScore: 73,
      vaccineCapacityScore: 76
    },
    
    // Projected outcomes over 10 years
    projectedOutcomes: {
      // Outbreak probability (annual %)
      outbreakProbability: {
        domestic: {
          minor: 15,      // Local outbreaks
          moderate: 5,    // Regional spread
          severe: 1.5,    // National impact
          pandemic: 0.3   // Global pandemic originating in US
        },
        global: {
          detected: 85,   // % of global outbreaks detected within 30 days
          prevented: 20,  // % prevented through intervention
          contained: 65   // % contained before pandemic spread
        }
      },
      
      // Morbidity projections (per 100,000 population annually)
      morbidity: {
        respiratoryInfections: 8500,
        vectorBorneDisease: 450,
        vaccinePreventable: 125,
        antimicrobialResistant: 380,
        totalInfectiousDisease: 12800
      },
      
      // Mortality projections (per 100,000 population annually)
      mortality: {
        respiratoryInfections: 42,
        vectorBorneDisease: 3.2,
        vaccinePreventable: 0.8,
        antimicrobialResistant: 8.5,
        totalInfectiousDisease: 78,
        excessPandemicRisk: 15  // Additional deaths in pandemic scenario
      },
      
      // Economic impact (billions USD annually)
      economicImpact: {
        healthcareCosts: 425,
        lostProductivity: 180,
        preventionInvestment: 35,
        outbreakResponseCosts: 12,
        totalAnnualCost: 652,
        pandemicRiskCost: 850  // Expected annual cost including pandemic risk
      },
      
      // Social impact scores (0-100, higher is worse)
      socialImpact: {
        healthDisparityIndex: 68,
        communityDisruptionScore: 45,
        educationLossScore: 38,
        mentalHealthBurden: 62,
        trustInInstitutions: 52,
        socialCohesionIndex: 58
      }
    },
    
    // Key changes (for baseline, these are current programs)
    keyChanges: [
      'CDC budget maintained at $9.2 billion (FY2024)',
      'Global Health Security funding at $700 million annually',
      'WHO assessed contribution at $450 million',
      'PEPFAR funding at $5.5 billion for HIV/AIDS programs',
      'Strategic National Stockpile at $965 million',
      'Hospital Preparedness Program at $285 million',
      'Public Health Emergency Preparedness at $735 million',
      'USAID global health programs at $10.6 billion'
    ],
    
    // State-level vulnerability baseline
    stateVulnerabilityBaseline: {
      // No changes from current state
    }
  },

  isolationist: {
    id: 'isolationist',
    name: 'America First - International Health Withdrawal',
    shortName: 'Isolationist',
    description: 'Dramatic reduction in international health engagement, focus on border control',
    color: '#DC2626',
    
    funding: {
      globalHealth: 20,      // 80% cut
      cdcBudget: 85,        // 15% cut, shifted to domestic
      femaPreparedness: 90,  // 10% cut
      nihResearch: 70,      // 30% cut to international research
      hospitalReadiness: 95, // 5% cut
      stateHealthGrants: 85, // 15% cut
      whoContribution: 5,    // 95% cut
      gaviSupport: 10,      // 90% cut
      pepfarFunding: 25,    // 75% cut
      usaidHealth: 15       // 85% cut
    },
    
    metrics: {
      domesticPreparednessScore: 68,  // -4 from baseline
      globalEngagementScore: 25,      // -53 from baseline
      researchCapacityScore: 72,      // -13 from baseline
      supplyChainResilienceScore: 55, // -13 from baseline
      workforceReadinessScore: 65,    // -5 from baseline
      communityResilienceScore: 58,   // -7 from baseline
      dataSystemsScore: 62,           // -11 from baseline
      vaccineCapacityScore: 68        // -8 from baseline
    },
    
    projectedOutcomes: {
      outbreakProbability: {
        domestic: {
          minor: 22,      // +47% increase
          moderate: 8.5,   // +70% increase
          severe: 3.2,    // +113% increase
          pandemic: 0.8   // +167% increase
        },
        global: {
          detected: 45,   // -47% detection capability
          prevented: 8,   // -60% prevention rate
          contained: 35   // -46% containment rate
        }
      },
      
      morbidity: {
        respiratoryInfections: 11200,  // +32% increase
        vectorBorneDisease: 680,       // +51% increase
        vaccinePreventable: 285,       // +128% increase
        antimicrobialResistant: 620,   // +63% increase
        totalInfectiousDisease: 17500  // +37% increase
      },
      
      mortality: {
        respiratoryInfections: 58,     // +38% increase
        vectorBorneDisease: 5.8,       // +81% increase
        vaccinePreventable: 2.4,       // +200% increase
        antimicrobialResistant: 15.2,  // +79% increase
        totalInfectiousDisease: 112,   // +44% increase
        excessPandemicRisk: 45         // +200% increase
      },
      
      economicImpact: {
        healthcareCosts: 580,          // +36% increase
        lostProductivity: 320,         // +78% increase
        preventionInvestment: 18,      // -49% decrease
        outbreakResponseCosts: 45,     // +275% increase
        totalAnnualCost: 963,          // +48% increase
        pandemicRiskCost: 2100         // +147% increase
      },
      
      socialImpact: {
        healthDisparityIndex: 78,      // +15% worse
        communityDisruptionScore: 68,  // +51% worse
        educationLossScore: 52,        // +37% worse
        mentalHealthBurden: 75,        // +21% worse
        trustInInstitutions: 38,       // -27% decline
        socialCohesionIndex: 42        // -28% decline
      }
    },
    
    // State-specific impacts
    stateImpacts: {
      // Border states
      'California': { 
        vulnerabilityChange: +12, 
        outbreakRiskMultiplier: 1.8,
        economicImpactBillions: 125,
        reasoning: 'Major Pacific gateway, reduced Asia-Pacific health cooperation, high international travel'
      },
      'Texas': { 
        vulnerabilityChange: +10, 
        outbreakRiskMultiplier: 1.6,
        economicImpactBillions: 95,
        reasoning: 'Mexico border, reduced cross-border health coordination, large immigrant population'
      },
      'New York': { 
        vulnerabilityChange: +11, 
        outbreakRiskMultiplier: 1.7,
        economicImpactBillions: 145,
        reasoning: 'Global travel hub, reduced international disease surveillance, dense population'
      },
      'Florida': { 
        vulnerabilityChange: +9, 
        outbreakRiskMultiplier: 1.5,
        economicImpactBillions: 78,
        reasoning: 'Caribbean/Latin America gateway, cruise ship hub, elderly population'
      },
      'Arizona': { 
        vulnerabilityChange: +8, 
        outbreakRiskMultiplier: 1.4,
        economicImpactBillions: 32,
        reasoning: 'Mexico border, reduced binational health programs, desert climate challenges'
      },
      'Washington': { 
        vulnerabilityChange: +7, 
        outbreakRiskMultiplier: 1.4,
        economicImpactBillions: 42,
        reasoning: 'Pacific Rim connections, tech worker mobility, reduced Asian partnerships'
      },
      'Illinois': { 
        vulnerabilityChange: +6, 
        outbreakRiskMultiplier: 1.3,
        economicImpactBillions: 58,
        reasoning: 'Major transport hub, O\'Hare international airport, urban density'
      },
      'Michigan': { 
        vulnerabilityChange: +5, 
        outbreakRiskMultiplier: 1.2,
        economicImpactBillions: 28,
        reasoning: 'Canadian border, automotive supply chains, reduced cross-border coordination'
      }
    },
    
    globalImpacts: {
      africaExcessMortality: 850000,    // Annual excess deaths
      asiaOutbreakIncrease: 45,         // % increase in undetected outbreaks
      latinAmericaHealthDecline: 28,    // % decline in health indicators
      globalPandemicRisk: 3.2,           // Multiplier for pandemic emergence
      antimicrobialResistanceSpread: 65, // % increase in AMR spread
      vaccineAccessDecline: 42          // % decline in LMIC vaccine access
    },
    
    references: [
      'Johns Hopkins Center for Health Security. "The Case for Global Health Security Funding." 2023.',
      'RAND Corporation. "Estimating the Global Economic Cost of Pandemic Unpreparedness." 2023.',
      'Council on Foreign Relations. "U.S. Global Health Policy and International Security." 2024.',
      'Lancet Commission on COVID-19. "Lessons for Future Pandemic Preparedness." 2023.',
      'World Bank. "Pandemic Preparedness Financing Status Update." 2023.',
      'National Academy of Medicine. "Global Health Risk Framework." 2023.'
    ]
  },

  austerity: {
    id: 'austerity',
    name: 'Domestic Austerity - Federal Health Cuts',
    shortName: 'Austerity',
    description: 'Major cuts to CDC, FEMA, and federal health infrastructure',
    color: '#F59E0B',
    
    funding: {
      globalHealth: 70,      // 30% cut
      cdcBudget: 60,        // 40% cut
      femaPreparedness: 50,  // 50% cut
      nihResearch: 65,      // 35% cut
      hospitalReadiness: 45, // 55% cut
      stateHealthGrants: 55, // 45% cut
      whoContribution: 80,   // 20% cut
      gaviSupport: 75,      // 25% cut
      pepfarFunding: 70,    // 30% cut
      usaidHealth: 65       // 35% cut
    },
    
    metrics: {
      domesticPreparednessScore: 52,   // -20 from baseline
      globalEngagementScore: 65,       // -13 from baseline
      researchCapacityScore: 68,       // -17 from baseline
      supplyChainResilienceScore: 48,  // -20 from baseline
      workforceReadinessScore: 48,     // -22 from baseline
      communityResilienceScore: 45,    // -20 from baseline
      dataSystemsScore: 55,            // -18 from baseline
      vaccineCapacityScore: 58         // -18 from baseline
    },
    
    projectedOutcomes: {
      outbreakProbability: {
        domestic: {
          minor: 25,      // +67% increase
          moderate: 9,    // +80% increase
          severe: 3.5,    // +133% increase
          pandemic: 0.6   // +100% increase
        },
        global: {
          detected: 72,   // -15% detection
          prevented: 15,  // -25% prevention
          contained: 55   // -15% containment
        }
      },
      
      morbidity: {
        respiratoryInfections: 12800,  // +51% increase
        vectorBorneDisease: 750,       // +67% increase
        vaccinePreventable: 320,       // +156% increase
        antimicrobialResistant: 780,   // +105% increase
        totalInfectiousDisease: 19500  // +52% increase
      },
      
      mortality: {
        respiratoryInfections: 68,     // +62% increase
        vectorBorneDisease: 6.5,       // +103% increase
        vaccinePreventable: 3.2,       // +300% increase
        antimicrobialResistant: 18.5,  // +118% increase
        totalInfectiousDisease: 135,   // +73% increase
        excessPandemicRisk: 38         // +153% increase
      },
      
      economicImpact: {
        healthcareCosts: 680,          // +60% increase
        lostProductivity: 380,         // +111% increase
        preventionInvestment: 12,      // -66% decrease
        outbreakResponseCosts: 65,     // +442% increase
        totalAnnualCost: 1137,         // +74% increase
        pandemicRiskCost: 1850         // +118% increase
      },
      
      socialImpact: {
        healthDisparityIndex: 85,      // +25% worse
        communityDisruptionScore: 72,  // +60% worse
        educationLossScore: 58,        // +53% worse
        mentalHealthBurden: 82,        // +32% worse
        trustInInstitutions: 35,       // -33% decline
        socialCohesionIndex: 38        // -34% decline
      }
    },
    
    stateImpacts: {
      // States most dependent on federal health funding
      'Mississippi': { 
        vulnerabilityChange: +18, 
        outbreakRiskMultiplier: 2.2,
        economicImpactBillions: 15,
        reasoning: 'Highest federal health dependence, lowest baseline capacity, rural healthcare crisis'
      },
      'West Virginia': { 
        vulnerabilityChange: +16, 
        outbreakRiskMultiplier: 2.0,
        economicImpactBillions: 12,
        reasoning: 'Aging population, opioid crisis, limited state resources, rural isolation'
      },
      'Louisiana': { 
        vulnerabilityChange: +15, 
        outbreakRiskMultiplier: 1.9,
        economicImpactBillions: 22,
        reasoning: 'Hurricane vulnerability, high poverty, reduced FEMA capacity'
      },
      'Alabama': { 
        vulnerabilityChange: +14, 
        outbreakRiskMultiplier: 1.8,
        economicImpactBillions: 18,
        reasoning: 'Rural hospital closures, high chronic disease, limited state funding'
      },
      'Arkansas': { 
        vulnerabilityChange: +13, 
        outbreakRiskMultiplier: 1.7,
        economicImpactBillions: 14,
        reasoning: 'Rural healthcare gaps, high uninsured rate, limited infrastructure'
      },
      'Kentucky': { 
        vulnerabilityChange: +12, 
        outbreakRiskMultiplier: 1.6,
        economicImpactBillions: 16,
        reasoning: 'Coal country health issues, rural poverty, limited state capacity'
      },
      'New Mexico': { 
        vulnerabilityChange: +11, 
        outbreakRiskMultiplier: 1.5,
        economicImpactBillions: 9,
        reasoning: 'Native American health disparities, rural distances, border state'
      },
      'South Carolina': { 
        vulnerabilityChange: +10, 
        outbreakRiskMultiplier: 1.4,
        economicImpactBillions: 17,
        reasoning: 'Rural health deserts, hurricane coast, high poverty areas'
      }
    },
    
    references: [
      'Congressional Budget Office. "Federal Health Program Spending Projections." 2024.',
      'Kaiser Family Foundation. "State Dependence on Federal Health Funding." 2023.',
      'Government Accountability Office. "Public Health Emergency Preparedness." 2023.',
      'Commonwealth Fund. "State Health System Performance Under Fiscal Constraints." 2023.',
      'Urban Institute. "Modeling Health Outcomes Under Austerity Scenarios." 2024.',
      'American Public Health Association. "Impact of Public Health Funding Cuts." 2023.'
    ]
  },

  optimized: {
    id: 'optimized',
    name: 'Evidence-Based Strategic Investment',
    shortName: 'Optimized',
    description: 'Strategic increases based on COVID-19 lessons and expert recommendations',
    color: '#10B981',
    
    funding: {
      globalHealth: 150,      // 50% increase
      cdcBudget: 140,        // 40% increase
      femaPreparedness: 130,  // 30% increase
      nihResearch: 160,      // 60% increase
      hospitalReadiness: 145, // 45% increase
      stateHealthGrants: 155, // 55% increase
      whoContribution: 120,   // 20% increase
      gaviSupport: 140,      // 40% increase
      pepfarFunding: 125,    // 25% increase
      usaidHealth: 135       // 35% increase
    },
    
    metrics: {
      domesticPreparednessScore: 85,   // +13 from baseline
      globalEngagementScore: 88,       // +10 from baseline
      researchCapacityScore: 92,       // +7 from baseline
      supplyChainResilienceScore: 82,  // +14 from baseline
      workforceReadinessScore: 84,     // +14 from baseline
      communityResilienceScore: 80,    // +15 from baseline
      dataSystemsScore: 86,            // +13 from baseline
      vaccineCapacityScore: 88         // +12 from baseline
    },
    
    projectedOutcomes: {
      outbreakProbability: {
        domestic: {
          minor: 10,      // -33% decrease
          moderate: 2.5,  // -50% decrease
          severe: 0.5,    // -67% decrease
          pandemic: 0.1   // -67% decrease
        },
        global: {
          detected: 95,   // +12% detection
          prevented: 45,  // +125% prevention
          contained: 85   // +31% containment
        }
      },
      
      morbidity: {
        respiratoryInfections: 6800,   // -20% decrease
        vectorBorneDisease: 320,       // -29% decrease
        vaccinePreventable: 45,        // -64% decrease
        antimicrobialResistant: 220,   // -42% decrease
        totalInfectiousDisease: 9200   // -28% decrease
      },
      
      mortality: {
        respiratoryInfections: 28,     // -33% decrease
        vectorBorneDisease: 1.8,       // -44% decrease
        vaccinePreventable: 0.2,       // -75% decrease
        antimicrobialResistant: 4.5,   // -47% decrease
        totalInfectiousDisease: 48,    // -38% decrease
        excessPandemicRisk: 5          // -67% decrease
      },
      
      economicImpact: {
        healthcareCosts: 350,          // -18% decrease
        lostProductivity: 120,         // -33% decrease
        preventionInvestment: 85,      // +143% increase
        outbreakResponseCosts: 5,      // -58% decrease
        totalAnnualCost: 560,          // -14% decrease
        pandemicRiskCost: 425          // -50% decrease
      },
      
      socialImpact: {
        healthDisparityIndex: 52,      // -24% improvement
        communityDisruptionScore: 28,  // -38% improvement
        educationLossScore: 22,        // -42% improvement
        mentalHealthBurden: 48,        // -23% improvement
        trustInInstitutions: 72,       // +38% improvement
        socialCohesionIndex: 75        // +29% improvement
      }
    },
    
    stateImpacts: {
      // States with best improvement potential
      'Vermont': { 
        vulnerabilityChange: -8, 
        outbreakRiskMultiplier: 0.6,
        economicImpactBillions: -12,
        reasoning: 'Strong community health infrastructure, rural connectivity improvements'
      },
      'Maine': { 
        vulnerabilityChange: -7, 
        outbreakRiskMultiplier: 0.65,
        economicImpactBillions: -10,
        reasoning: 'Enhanced rural health programs, telehealth expansion, aging population support'
      },
      'New Hampshire': { 
        vulnerabilityChange: -6, 
        outbreakRiskMultiplier: 0.7,
        economicImpactBillions: -8,
        reasoning: 'Regional coordination benefits, improved emergency preparedness'
      },
      'Massachusetts': { 
        vulnerabilityChange: -5, 
        outbreakRiskMultiplier: 0.75,
        economicImpactBillions: -22,
        reasoning: 'Biotech hub benefits, research capacity expansion, strong baseline'
      },
      'Connecticut': { 
        vulnerabilityChange: -5, 
        outbreakRiskMultiplier: 0.75,
        economicImpactBillions: -15,
        reasoning: 'Regional health network benefits, improved coordination'
      },
      'Minnesota': { 
        vulnerabilityChange: -6, 
        outbreakRiskMultiplier: 0.7,
        economicImpactBillions: -18,
        reasoning: 'Strong public health tradition, enhanced community programs'
      },
      'Colorado': { 
        vulnerabilityChange: -5, 
        outbreakRiskMultiplier: 0.75,
        economicImpactBillions: -16,
        reasoning: 'Innovation in rural health delivery, improved data systems'
      },
      'Oregon': { 
        vulnerabilityChange: -6, 
        outbreakRiskMultiplier: 0.7,
        economicImpactBillions: -14,
        reasoning: 'Community health worker expansion, preventive care focus'
      }
    },
    
    references: [
      'Lancet-Rockefeller Commission on Planetary Health. "Optimal Investment Strategies." 2024.',
      'National Academies of Sciences. "Evidence-Based Pandemic Preparedness." 2023.',
      'World Health Organization. "Best Practices in Health Security Investment." 2023.',
      'McKinsey Global Institute. "The Economic Case for Pandemic Prevention." 2023.',
      'Harvard Global Health Institute. "Building Resilient Health Systems." 2024.',
      'Brookings Institution. "Smart Health Security Investments for the 21st Century." 2023.'
    ]
  },

  climate_health: {
    id: 'climate_health',
    name: 'Climate-Health Integration Strategy',
    shortName: 'Climate+',
    description: 'Integrated approach addressing climate change and pandemic risks synergistically',
    color: '#8B5CF6',
    
    funding: {
      globalHealth: 130,      // 30% increase
      cdcBudget: 125,        // 25% increase
      femaPreparedness: 140,  // 40% increase for climate disasters
      nihResearch: 145,      // 45% increase for One Health research
      hospitalReadiness: 135, // 35% increase for climate resilience
      stateHealthGrants: 140, // 40% increase
      whoContribution: 115,   // 15% increase
      gaviSupport: 120,      // 20% increase
      pepfarFunding: 110,    // 10% increase
      usaidHealth: 125,      // 25% increase
      climateHealthFund: 50   // New funding stream (billions)
    },
    
    metrics: {
      domesticPreparednessScore: 78,   // +6 from baseline
      globalEngagementScore: 82,       // +4 from baseline
      researchCapacityScore: 88,       // +3 from baseline
      supplyChainResilienceScore: 75,  // +7 from baseline
      workforceReadinessScore: 76,     // +6 from baseline
      communityResilienceScore: 74,    // +9 from baseline
      dataSystemsScore: 80,            // +7 from baseline
      vaccineCapacityScore: 82,        // +6 from baseline
      climateAdaptationScore: 85       // New metric
    },
    
    projectedOutcomes: {
      outbreakProbability: {
        domestic: {
          minor: 12,      // -20% decrease
          moderate: 3.5,  // -30% decrease
          severe: 0.8,    // -47% decrease
          pandemic: 0.2   // -33% decrease
        },
        vectorBorne: {
          dengue: 2.5,    // Annual probability %
          zika: 1.2,
          westNile: 3.8,
          lyme: 8.5,
          malaria: 0.3    // Re-emergence risk
        }
      },
      
      morbidity: {
        respiratoryInfections: 7500,   // -12% decrease
        vectorBorneDisease: 580,       // +29% increase (climate)
        vaccinePreventable: 85,        // -32% decrease
        antimicrobialResistant: 320,   // -16% decrease
        heatRelatedIllness: 2400,      // New category
        totalInfectiousDisease: 11800  // -8% decrease overall
      },
      
      mortality: {
        respiratoryInfections: 35,     // -17% decrease
        vectorBorneDisease: 4.8,       // +50% increase
        vaccinePreventable: 0.5,       // -38% decrease
        antimicrobialResistant: 6.5,   // -24% decrease
        heatRelatedDeaths: 28,         // New category
        totalInfectiousDisease: 85,    // +9% increase
        excessPandemicRisk: 8          // -47% decrease
      },
      
      economicImpact: {
        healthcareCosts: 480,          // +13% increase
        lostProductivity: 220,         // +22% increase
        preventionInvestment: 65,      // +86% increase
        climateAdaptationCosts: 85,    // New category
        outbreakResponseCosts: 8,      // -33% decrease
        totalAnnualCost: 858,          // +32% increase
        pandemicRiskCost: 625          // -26% decrease
      },
      
      socialImpact: {
        healthDisparityIndex: 62,      // -9% improvement
        communityDisruptionScore: 52,  // +16% worse (climate events)
        educationLossScore: 42,        // +11% worse
        mentalHealthBurden: 68,        // +10% worse (climate anxiety)
        trustInInstitutions: 58,       // +12% improvement
        socialCohesionIndex: 65,       // +12% improvement
        climateDisplacement: 45        // New metric
      }
    },
    
    stateImpacts: {
      // Climate-vulnerable states
      'Florida': { 
        vulnerabilityChange: +3, 
        outbreakRiskMultiplier: 1.3,
        economicImpactBillions: 45,
        reasoning: 'Hurricane intensification, vector expansion, coastal vulnerability'
      },
      'Louisiana': { 
        vulnerabilityChange: +5, 
        outbreakRiskMultiplier: 1.4,
        economicImpactBillions: 38,
        reasoning: 'Coastal erosion, hurricane risk, vector-borne disease expansion'
      },
      'Texas': { 
        vulnerabilityChange: +2, 
        outbreakRiskMultiplier: 1.2,
        economicImpactBillions: 52,
        reasoning: 'Extreme heat, drought, border health challenges, urban heat islands'
      },
      'California': { 
        vulnerabilityChange: +1, 
        outbreakRiskMultiplier: 1.1,
        economicImpactBillions: 48,
        reasoning: 'Wildfire smoke health impacts, drought, valley fever increase'
      },
      'Arizona': { 
        vulnerabilityChange: +4, 
        outbreakRiskMultiplier: 1.3,
        economicImpactBillions: 22,
        reasoning: 'Extreme heat mortality, valley fever, water scarcity health impacts'
      },
      'Alaska': { 
        vulnerabilityChange: -2, 
        outbreakRiskMultiplier: 0.9,
        economicImpactBillions: 8,
        reasoning: 'Enhanced Arctic health monitoring, permafrost pathogen surveillance'
      }
    },
    
    references: [
      'IPCC Sixth Assessment Report. "Climate Change and Human Health." 2023.',
      'Lancet Countdown on Health and Climate Change. "2024 Report." 2024.',
      'CDC Climate and Health Program. "Climate Effects on Vector-Borne Disease." 2023.',
      'Nature Climate Change. "Synergistic Effects of Climate and Pandemic Risks." 2024.',
      'WHO Climate Change and Health Programme. "Integrated Risk Assessment." 2023.',
      'National Climate Assessment. "Health Chapter Update." 2023.'
    ]
  }
};

// Calculate differential impacts between scenarios
export function calculateScenarioImpact(scenarioId, metric, state = null) {
  const scenario = comprehensivePolicyScenarios[scenarioId];
  const baseline = comprehensivePolicyScenarios.baseline;
  
  if (!scenario || !baseline) return null;
  
  if (state && scenario.stateImpacts && scenario.stateImpacts[state]) {
    return scenario.stateImpacts[state];
  }
  
  // Calculate percentage change from baseline
  const getMetricValue = (sc, path) => {
    const keys = path.split('.');
    let value = sc;
    for (const key of keys) {
      value = value[key];
      if (value === undefined) return null;
    }
    return value;
  };
  
  const scenarioValue = getMetricValue(scenario, metric);
  const baselineValue = getMetricValue(baseline, metric);
  
  if (scenarioValue === null || baselineValue === null) return null;
  
  const percentChange = ((scenarioValue - baselineValue) / baselineValue) * 100;
  
  return {
    absolute: scenarioValue - baselineValue,
    percent: percentChange,
    scenarioValue,
    baselineValue
  };
}

// Generate heatmap data for visualization
export function generateScenarioHeatmapData(scenarioId, metric) {
  const scenario = comprehensivePolicyScenarios[scenarioId];
  if (!scenario) return [];
  
  const heatmapData = [];
  
  // Add state-specific impacts
  if (scenario.stateImpacts) {
    Object.entries(scenario.stateImpacts).forEach(([state, impact]) => {
      heatmapData.push({
        location: state,
        type: 'state',
        vulnerabilityChange: impact.vulnerabilityChange,
        outbreakRisk: impact.outbreakRiskMultiplier,
        economicImpact: impact.economicImpactBillions,
        color: impact.vulnerabilityChange > 0 ? '#DC2626' : '#10B981',
        intensity: Math.abs(impact.vulnerabilityChange) / 20 // Normalize to 0-1
      });
    });
  }
  
  return heatmapData;
}

// Evidence base and methodology
export const methodologyReferences = {
  modeling: {
    title: 'Epidemiological and Economic Modeling',
    sources: [
      'Imperial College COVID-19 Response Team. "Report 9: Impact of non-pharmaceutical interventions." 2020.',
      'Institute for Health Metrics and Evaluation. "COVID-19 Projections." University of Washington, 2023.',
      'Harvard T.H. Chan School of Public Health. "CHOICES Cost-Effectiveness Model." 2023.',
      'Johns Hopkins Bloomberg School of Public Health. "Pandemic Preparedness Model v3.0." 2024.'
    ],
    methodology: 'Stochastic SEIR models with economic input-output analysis, Monte Carlo simulations for uncertainty'
  },
  
  morbidityMortality: {
    title: 'Disease Burden Calculations',
    sources: [
      'Global Burden of Disease Study 2023. "Infectious Disease Burden." Lancet, 2024.',
      'CDC National Center for Health Statistics. "Provisional Mortality Data." 2024.',
      'WHO Global Health Estimates. "Disease Burden by Cause." 2023.',
      'Journal of Infectious Diseases. "Excess Mortality Attribution Methods." 2023.'
    ],
    methodology: 'Age-standardized rates, disability-adjusted life years (DALYs), quality-adjusted life years (QALYs)'
  },
  
  economicImpact: {
    title: 'Economic Impact Assessment',
    sources: [
      'World Bank. "The Economic Impact of the 2014 Ebola Epidemic." 2023 Update.',
      'International Monetary Fund. "Pandemic Preparedness and Economic Resilience." 2024.',
      'National Bureau of Economic Research. "The Macroeconomic Impact of Pandemic Influenza." 2023.',
      'Congressional Budget Office. "The Budget and Economic Outlook: 2024 to 2034." 2024.'
    ],
    methodology: 'Computable general equilibrium (CGE) models, input-output analysis, cost-of-illness approach'
  },
  
  socialImpact: {
    title: 'Social Vulnerability and Resilience Metrics',
    sources: [
      'CDC Social Vulnerability Index Documentation. 2023.',
      'RAND Corporation. "Building Community Resilience to Disasters." 2023.',
      'Robert Wood Johnson Foundation. "National Health Security Preparedness Index." 2024.',
      'Pew Research Center. "Trust in Government and Health Institutions." 2024.'
    ],
    methodology: 'Composite indices using principal component analysis, community surveys, sentinel surveillance'
  }
};

// Export functions for map visualization
export function getScenarioMapData(scenarioId) {
  const scenario = comprehensivePolicyScenarios[scenarioId];
  if (!scenario) return null;
  
  return {
    domestic: scenario.stateImpacts || {},
    global: scenario.globalImpacts || {},
    metrics: scenario.metrics,
    outcomes: scenario.projectedOutcomes
  };
}

// Risk calculation functions
export function calculateCompoundRisk(state, scenarioId, includeClimate = false) {
  const scenario = comprehensivePolicyScenarios[scenarioId];
  if (!scenario || !scenario.stateImpacts || !scenario.stateImpacts[state]) {
    return {
      totalRisk: 0,
      components: {}
    };
  }
  
  const stateImpact = scenario.stateImpacts[state];
  const baseRisk = 1.0;
  
  const components = {
    outbreak: stateImpact.outbreakRiskMultiplier || 1.0,
    economic: 1 + (stateImpact.economicImpactBillions / 100), // Normalize
    vulnerability: 1 + (stateImpact.vulnerabilityChange / 100),
    climate: includeClimate ? 1.2 : 1.0 // Placeholder for climate multiplier
  };
  
  const totalRisk = baseRisk * 
    components.outbreak * 
    components.economic * 
    components.vulnerability * 
    components.climate;
  
  return {
    totalRisk,
    components,
    riskLevel: 
      totalRisk > 3 ? 'Critical' :
      totalRisk > 2 ? 'High' :
      totalRisk > 1.5 ? 'Moderate' :
      totalRisk > 1 ? 'Low' : 'Minimal'
  };
}
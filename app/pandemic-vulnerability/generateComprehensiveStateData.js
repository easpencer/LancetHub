// Generate comprehensive 50-state policy impact data based on evidence-based factors
// This addresses the issue where scenarios only had partial state coverage

const stateCharacteristics = {
  // Major international gateway states
  'California': { international: 'high', economy: 'large', healthcare: 'good', rural: 'low', border: 'mexico', federal_dependency: 'low' },
  'New York': { international: 'high', economy: 'large', healthcare: 'good', rural: 'low', border: 'none', federal_dependency: 'low' },
  'Florida': { international: 'high', economy: 'large', healthcare: 'medium', rural: 'low', border: 'none', federal_dependency: 'low' },
  'Texas': { international: 'high', economy: 'large', healthcare: 'medium', rural: 'medium', border: 'mexico', federal_dependency: 'low' },
  'Illinois': { international: 'medium', economy: 'large', healthcare: 'good', rural: 'low', border: 'none', federal_dependency: 'low' },
  
  // Border states
  'Arizona': { international: 'medium', economy: 'medium', healthcare: 'medium', rural: 'medium', border: 'mexico', federal_dependency: 'medium' },
  'New Mexico': { international: 'low', economy: 'small', healthcare: 'poor', rural: 'high', border: 'mexico', federal_dependency: 'high' },
  'Washington': { international: 'medium', economy: 'large', healthcare: 'good', rural: 'medium', border: 'canada', federal_dependency: 'low' },
  'Michigan': { international: 'low', economy: 'medium', healthcare: 'medium', rural: 'medium', border: 'canada', federal_dependency: 'medium' },
  'Minnesota': { international: 'low', economy: 'medium', healthcare: 'good', rural: 'medium', border: 'canada', federal_dependency: 'low' },
  'Montana': { international: 'low', economy: 'small', healthcare: 'poor', rural: 'high', border: 'canada', federal_dependency: 'medium' },
  'North Dakota': { international: 'low', economy: 'small', healthcare: 'medium', rural: 'high', border: 'canada', federal_dependency: 'medium' },
  'Maine': { international: 'low', economy: 'small', healthcare: 'medium', rural: 'high', border: 'canada', federal_dependency: 'medium' },
  'Vermont': { international: 'low', economy: 'small', healthcare: 'good', rural: 'high', border: 'canada', federal_dependency: 'low' },
  'New Hampshire': { international: 'low', economy: 'small', healthcare: 'good', rural: 'medium', border: 'canada', federal_dependency: 'low' },
  'Alaska': { international: 'low', economy: 'small', healthcare: 'poor', rural: 'high', border: 'canada', federal_dependency: 'high' },
  
  // High federal dependency states (vulnerable to austerity)
  'Mississippi': { international: 'low', economy: 'small', healthcare: 'poor', rural: 'high', border: 'none', federal_dependency: 'high' },
  'West Virginia': { international: 'low', economy: 'small', healthcare: 'poor', rural: 'high', border: 'none', federal_dependency: 'high' },
  'Louisiana': { international: 'low', economy: 'medium', healthcare: 'poor', rural: 'medium', border: 'none', federal_dependency: 'high' },
  'Alabama': { international: 'low', economy: 'medium', healthcare: 'poor', rural: 'high', border: 'none', federal_dependency: 'high' },
  'Arkansas': { international: 'low', economy: 'small', healthcare: 'poor', rural: 'high', border: 'none', federal_dependency: 'high' },
  'South Carolina': { international: 'low', economy: 'medium', healthcare: 'medium', rural: 'medium', border: 'none', federal_dependency: 'high' },
  'Kentucky': { international: 'low', economy: 'medium', healthcare: 'poor', rural: 'high', border: 'none', federal_dependency: 'high' },
  'Tennessee': { international: 'low', economy: 'medium', healthcare: 'medium', rural: 'medium', border: 'none', federal_dependency: 'medium' },
  
  // Biotech/Research hubs (benefit from strategic investment)
  'Massachusetts': { international: 'medium', economy: 'large', healthcare: 'excellent', rural: 'low', border: 'none', federal_dependency: 'low' },
  'Connecticut': { international: 'low', economy: 'medium', healthcare: 'good', rural: 'low', border: 'none', federal_dependency: 'low' },
  'Maryland': { international: 'low', economy: 'medium', healthcare: 'good', rural: 'low', border: 'none', federal_dependency: 'low' },
  'North Carolina': { international: 'low', economy: 'large', healthcare: 'good', rural: 'medium', border: 'none', federal_dependency: 'low' },
  'Georgia': { international: 'medium', economy: 'large', healthcare: 'medium', rural: 'medium', border: 'none', federal_dependency: 'low' },
  
  // Mid-tier states
  'Pennsylvania': { international: 'low', economy: 'large', healthcare: 'good', rural: 'medium', border: 'none', federal_dependency: 'medium' },
  'Ohio': { international: 'low', economy: 'medium', healthcare: 'medium', rural: 'medium', border: 'none', federal_dependency: 'medium' },
  'Virginia': { international: 'low', economy: 'medium', healthcare: 'good', rural: 'medium', border: 'none', federal_dependency: 'low' },
  'Colorado': { international: 'low', economy: 'medium', healthcare: 'good', rural: 'medium', border: 'none', federal_dependency: 'low' },
  'Oregon': { international: 'low', economy: 'medium', healthcare: 'good', rural: 'medium', border: 'none', federal_dependency: 'low' },
  'Wisconsin': { international: 'low', economy: 'medium', healthcare: 'good', rural: 'medium', border: 'none', federal_dependency: 'medium' },
  'Indiana': { international: 'low', economy: 'medium', healthcare: 'medium', rural: 'medium', border: 'none', federal_dependency: 'medium' },
  'Missouri': { international: 'low', economy: 'medium', healthcare: 'medium', rural: 'medium', border: 'none', federal_dependency: 'medium' },
  'Iowa': { international: 'low', economy: 'small', healthcare: 'good', rural: 'high', border: 'none', federal_dependency: 'medium' },
  'Kansas': { international: 'low', economy: 'small', healthcare: 'medium', rural: 'high', border: 'none', federal_dependency: 'medium' },
  'Nebraska': { international: 'low', economy: 'small', healthcare: 'good', rural: 'high', border: 'none', federal_dependency: 'medium' },
  'Utah': { international: 'low', economy: 'medium', healthcare: 'good', rural: 'medium', border: 'none', federal_dependency: 'low' },
  'Nevada': { international: 'low', economy: 'medium', healthcare: 'medium', rural: 'medium', border: 'none', federal_dependency: 'low' },
  'Oklahoma': { international: 'low', economy: 'medium', healthcare: 'poor', rural: 'medium', border: 'none', federal_dependency: 'medium' },
  
  // Small/rural states
  'Wyoming': { international: 'low', economy: 'small', healthcare: 'medium', rural: 'high', border: 'none', federal_dependency: 'medium' },
  'South Dakota': { international: 'low', economy: 'small', healthcare: 'medium', rural: 'high', border: 'none', federal_dependency: 'medium' },
  'Idaho': { international: 'low', economy: 'small', healthcare: 'medium', rural: 'high', border: 'none', federal_dependency: 'medium' },
  'Delaware': { international: 'low', economy: 'small', healthcare: 'good', rural: 'low', border: 'none', federal_dependency: 'low' },
  'Rhode Island': { international: 'low', economy: 'small', healthcare: 'good', rural: 'low', border: 'none', federal_dependency: 'low' },
  'Hawaii': { international: 'high', economy: 'small', healthcare: 'medium', rural: 'low', border: 'none', federal_dependency: 'medium' },
  'New Jersey': { international: 'medium', economy: 'large', healthcare: 'good', rural: 'low', border: 'none', federal_dependency: 'low' }
};

// Policy impact calculation functions
function calculateDomesticFocusImpact(state, characteristics) {
  let vulnChange = 0;
  let riskMult = 1.0;
  let econImpact = 0;
  let reasoning = [];
  
  // International exposure penalty
  if (characteristics.international === 'high') {
    vulnChange += 8;
    riskMult += 0.6;
    econImpact += 50;
    reasoning.push('high international exposure');
  } else if (characteristics.international === 'medium') {
    vulnChange += 4;
    riskMult += 0.3;
    econImpact += 25;
    reasoning.push('moderate international exposure');
  }
  
  // Border penalty
  if (characteristics.border !== 'none') {
    vulnChange += 3;
    riskMult += 0.2;
    econImpact += 15;
    reasoning.push('border coordination reduction');
  }
  
  // Large economy penalty (more interconnected)
  if (characteristics.economy === 'large') {
    vulnChange += 2;
    riskMult += 0.1;
    econImpact += 20;
    reasoning.push('economic interconnectedness');
  }
  
  // Small benefit for rural states (less international dependency)
  if (characteristics.rural === 'high') {
    vulnChange -= 1;
    riskMult -= 0.05;
    econImpact -= 5;
    reasoning.push('limited international dependency');
  }
  
  return {
    vulnerabilityChange: Math.max(-5, Math.min(15, vulnChange)),
    outbreakRiskMultiplier: Math.max(0.8, Math.min(2.0, riskMult)),
    economicImpactBillions: Math.max(0, econImpact),
    reasoning: reasoning.length > 0 ? reasoning.join(', ') : 'minimal impact from domestic focus approach'
  };
}

function calculateFiscalConstraintImpact(state, characteristics) {
  let vulnChange = 0;
  let riskMult = 1.0;
  let econImpact = 0;
  let reasoning = [];
  
  // Federal dependency penalty
  if (characteristics.federal_dependency === 'high') {
    vulnChange += 12;
    riskMult += 0.8;
    econImpact += 20;
    reasoning.push('high federal health funding dependency');
  } else if (characteristics.federal_dependency === 'medium') {
    vulnChange += 6;
    riskMult += 0.4;
    econImpact += 10;
    reasoning.push('moderate federal funding dependency');
  } else {
    vulnChange += 2;
    riskMult += 0.1;
    econImpact += 5;
    reasoning.push('some federal program reductions');
  }
  
  // Rural penalty (fewer resources)
  if (characteristics.rural === 'high') {
    vulnChange += 4;
    riskMult += 0.3;
    econImpact += 8;
    reasoning.push('rural healthcare infrastructure strain');
  } else if (characteristics.rural === 'medium') {
    vulnChange += 2;
    riskMult += 0.15;
    econImpact += 4;
    reasoning.push('mixed rural-urban impact');
  }
  
  // Poor healthcare penalty
  if (characteristics.healthcare === 'poor') {
    vulnChange += 3;
    riskMult += 0.2;
    econImpact += 6;
    reasoning.push('baseline healthcare capacity limitations');
  }
  
  // Small benefit for states with good healthcare (can absorb cuts better)
  if (characteristics.healthcare === 'excellent') {
    vulnChange -= 2;
    riskMult -= 0.1;
    reasoning.push('strong baseline healthcare capacity');
  }
  
  return {
    vulnerabilityChange: Math.max(0, Math.min(20, vulnChange)),
    outbreakRiskMultiplier: Math.max(1.0, Math.min(2.5, riskMult)),
    economicImpactBillions: Math.max(0, econImpact),
    reasoning: reasoning.join(', ')
  };
}

function calculateStrategicInvestmentImpact(state, characteristics) {
  let vulnChange = 0;
  let riskMult = 1.0;
  let econImpact = 0;
  let reasoning = [];
  
  // Healthcare quality benefit
  if (characteristics.healthcare === 'excellent') {
    vulnChange -= 6;
    riskMult -= 0.3;
    econImpact -= 15;
    reasoning.push('biotech/research hub expansion');
  } else if (characteristics.healthcare === 'good') {
    vulnChange -= 4;
    riskMult -= 0.2;
    econImpact -= 10;
    reasoning.push('strong healthcare infrastructure benefits');
  } else if (characteristics.healthcare === 'medium') {
    vulnChange -= 2;
    riskMult -= 0.1;
    econImpact -= 5;
    reasoning.push('moderate healthcare improvements');
  } else {
    vulnChange -= 1;
    riskMult -= 0.05;
    econImpact -= 2;
    reasoning.push('basic healthcare capacity building');
  }
  
  // Rural benefit (targeted investment)
  if (characteristics.rural === 'high') {
    vulnChange -= 3;
    riskMult -= 0.15;
    econImpact -= 8;
    reasoning.push('rural health infrastructure investment');
  }
  
  // Large economy benefit
  if (characteristics.economy === 'large') {
    vulnChange -= 2;
    riskMult -= 0.1;
    econImpact -= 10;
    reasoning.push('economic multiplier effects');
  }
  
  // Low federal dependency benefit (can leverage state resources)
  if (characteristics.federal_dependency === 'low') {
    vulnChange -= 1;
    riskMult -= 0.05;
    econImpact -= 5;
    reasoning.push('strong state-federal partnership');
  }
  
  return {
    vulnerabilityChange: Math.max(-12, Math.min(2, vulnChange)),
    outbreakRiskMultiplier: Math.max(0.5, Math.min(1.1, riskMult)),
    economicImpactBillions: Math.min(0, econImpact),
    reasoning: reasoning.join(', ')
  };
}

function calculateIntegratedResilienceImpact(state, characteristics) {
  let vulnChange = 0;
  let riskMult = 1.0;
  let econImpact = 0;
  let reasoning = [];
  
  // Climate vulnerability (this scenario addresses climate-health nexus)
  const climateVulnerable = ['Florida', 'Louisiana', 'Texas', 'California', 'Arizona', 'Nevada', 'Georgia', 'South Carolina', 'North Carolina'];
  if (climateVulnerable.includes(state)) {
    vulnChange += 2;
    riskMult += 0.15;
    econImpact += 15;
    reasoning.push('climate-health vulnerability addressed');
  }
  
  // Rural benefit (community resilience focus)
  if (characteristics.rural === 'high') {
    vulnChange -= 2;
    riskMult -= 0.1;
    econImpact -= 5;
    reasoning.push('community resilience building');
  }
  
  // Healthcare improvement benefit
  if (characteristics.healthcare === 'poor') {
    vulnChange -= 3;
    riskMult -= 0.15;
    econImpact -= 8;
    reasoning.push('health equity improvements');
  } else if (characteristics.healthcare === 'medium') {
    vulnChange -= 2;
    riskMult -= 0.1;
    econImpact -= 5;
    reasoning.push('health system strengthening');
  }
  
  // International exposure (this scenario maintains global cooperation)
  if (characteristics.international === 'high') {
    vulnChange -= 1;
    riskMult -= 0.05;
    econImpact -= 10;
    reasoning.push('maintained international cooperation');
  }
  
  return {
    vulnerabilityChange: Math.max(-8, Math.min(5, vulnChange)),
    outbreakRiskMultiplier: Math.max(0.7, Math.min(1.3, riskMult)),
    economicImpactBillions: econImpact,
    reasoning: reasoning.length > 0 ? reasoning.join(', ') : 'integrated health-climate resilience approach'
  };
}

// Generate complete state data for each scenario
console.log('=== DOMESTIC FOCUS SCENARIO ===');
console.log('stateImpacts: {');
Object.entries(stateCharacteristics).forEach(([state, chars]) => {
  const impact = calculateDomesticFocusImpact(state, chars);
  console.log(`  '${state}': { vulnerabilityChange: ${impact.vulnerabilityChange >= 0 ? '+' : ''}${impact.vulnerabilityChange}, outbreakRiskMultiplier: ${impact.outbreakRiskMultiplier}, economicImpactBillions: ${impact.economicImpactBillions}, reasoning: '${impact.reasoning}' },`);
});
console.log('}');

console.log('\n=== FISCAL CONSTRAINT SCENARIO ===');
console.log('stateImpacts: {');
Object.entries(stateCharacteristics).forEach(([state, chars]) => {
  const impact = calculateFiscalConstraintImpact(state, chars);
  console.log(`  '${state}': { vulnerabilityChange: +${impact.vulnerabilityChange}, outbreakRiskMultiplier: ${impact.outbreakRiskMultiplier}, economicImpactBillions: ${impact.economicImpactBillions}, reasoning: '${impact.reasoning}' },`);
});
console.log('}');

console.log('\n=== STRATEGIC INVESTMENT SCENARIO ===');
console.log('stateImpacts: {');
Object.entries(stateCharacteristics).forEach(([state, chars]) => {
  const impact = calculateStrategicInvestmentImpact(state, chars);
  console.log(`  '${state}': { vulnerabilityChange: ${impact.vulnerabilityChange}, outbreakRiskMultiplier: ${impact.outbreakRiskMultiplier}, economicImpactBillions: ${impact.economicImpactBillions}, reasoning: '${impact.reasoning}' },`);
});
console.log('}');

console.log('\n=== INTEGRATED RESILIENCE SCENARIO ===');
console.log('stateImpacts: {');
Object.entries(stateCharacteristics).forEach(([state, chars]) => {
  const impact = calculateIntegratedResilienceImpact(state, chars);
  console.log(`  '${state}': { vulnerabilityChange: ${impact.vulnerabilityChange >= 0 ? '+' : ''}${impact.vulnerabilityChange}, outbreakRiskMultiplier: ${impact.outbreakRiskMultiplier}, economicImpactBillions: ${impact.economicImpactBillions}, reasoning: '${impact.reasoning}' },`);
});
console.log('}');